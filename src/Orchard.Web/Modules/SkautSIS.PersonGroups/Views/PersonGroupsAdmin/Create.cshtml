@model PersonGroupCreateViewModel
@using SkautSIS.PersonGroups.ViewModels;
@using SkautSIS.PersonGroups.Models;

@{ Layout.Title = T("Add Person Group").ToString(); }

@{ var personIndex = 0; }

@using (Html.BeginFormAntiForgeryPost())
{
    Html.ValidationSummary();
    <fieldset>
        <legend>@T("Information")</legend>
        @Html.LabelFor(m => m.DisplayName, T("Name"))
        @Html.TextBoxFor(m => m.DisplayName, new { @class = "textMedium" })
        @Html.ValidationMessageFor(m => m.DisplayName, "*")
    </fieldset>
    <fieldset>
        <legend>@T("Persons")</legend>
        <ul>
        @foreach (var entry in Model.Persons)
        {
             <li>
                <input type="hidden" value="@entry.Person.SkautIsPersonId" name="@Html.FieldNameFor(m => m.Persons[personIndex].Person.SkautIsPersonId)"/>
                <label for="@Html.FieldNameFor(m => m.Persons[personIndex].IsChecked)">
                    <input type="checkbox" value="true" name="@Html.FieldNameFor(m => m.Persons[personIndex].IsChecked)" id="@Html.FieldNameFor(m => m.Persons[personIndex].IsChecked)"
                        @if (entry.IsChecked) {<text>checked="checked"</text>}/>
                        @string.Format("{0} {1} - {2}", entry.Person.FirstName, entry.Person.LastName, entry.Person.NickName)
                </label>
                @{personIndex++;}
            </li>
        }
        </ul>
    </fieldset>
    <fieldset>
        <button class="primaryAction" type="submit">@T("Save")</button>
    </fieldset>
}